generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model User {
  id Int @id @default(autoincrement())
  password String
  email String @unique
  emailVerifiedAt DateTime?
  twoFactorEnableAt DateTime?
  disabledAt DateTime?

  // Pour accéder à la refreshToken d'un utilisateur
  refreshToken RefreshToken?
}

model RefreshToken {
  token String @id
  revokedAt DateTime?
  expiredAt DateTime
  
  // Pour savoir à qui appartient un refresh token
  user User @relation(fields: [userId], references: [id])
  userId Int @unique
}

model BlacklistedAccessToken {
  accesToken String @id

  // Le prof a mis "expiresAt", may be a mistake (monsieur vous voyez ça, corrigez nous si on a tort s'il vour plait :) )
  expiredAt DateTime
}

model VerificationToken {
  emailVerifyToken String @id
  expiredAt DateTime
}

model LoginHistory {
  email String @id
  success Boolean
}